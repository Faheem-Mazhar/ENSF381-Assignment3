<!DOCTYPE html>
<html>
    <head>
        <title>
            LMS Login
        </title>
        <link rel="stylesheet" type="text/css" href="../src/styles.css">
        <style>
            /* Additional styles for message box */
            .message-box {
                padding: 15px;
                margin: 15px 0;
                border-radius: 5px;
                display: none;
                width: 80%;
                text-align: center;
            }
            
            .success {
                background-color: #dff0d8;
                color: #3c763d;
                border: 1px solid #d6e9c6;
            }
            
            .error {
                background-color: #f2dede;
                color: #a94442;
                border: 1px solid #ebccd1;
            }
        </style>
    </head>
    <body>
        <div>
            <header>
                <img src="../public/images/logo.jpg" alt="logo" width="140px" height="140px"/>
                <h1>
                    <b>LMS - Learning Managment System</b>
                </h1>
            </header>
            <div class="navbar" >
                <a  href="index.html">Homepage</a>
            </div>
            <main class="login">
                <h2>
                    LMS Login
                </h2>
                <!-- Message box for success/error messages -->
                <div id="messageBox" class="message-box"></div>
                
                <form id="loginForm">
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="username"><br><br>
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password"><br><br>
                </form>
                <button type="button" onclick="validateLogin()">Login</button>
                <br>
                <div>
                    <a href="reset_password.html">Forgot Password?</a>
                </div>
                <div style="margin-top: 10px;">
                    <a href="signup.html">New User? Sign Up</a>
                </div>
            </main>
            <footer>
                <p>
                    &copy; 2025 LMS. All rights reserved.
                </p>
            </footer>
        </div>
    </body>
</html>
<script>
    // Function to validate login credentials against the API
    async function validateLogin() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        
        // Check if fields are empty
        if (!username || !password) {
            showMessage('Please enter both username and password.', 'error');
            return;
        }
        
        try {
            // Fetch user data from the API
            const response = await fetch('https://jsonplaceholder.typicode.com/users');
            const users = await response.json();
            
            // Find user with matching username
            const user = users.find(user => user.username === username);
            
            if (user && user.email === password) {
                // Successful login
                showMessage('Login successful! Redirecting to courses...', 'success');
                
                // Redirect after 2 seconds
                setTimeout(() => {
                    window.location.href = 'course_view.html';
                }, 2000);
            } else {
                // Failed login
                showMessage('Invalid username or password. Please try again.', 'error');
            }
        } catch (error) {
            showMessage('Error connecting to the server. Please try again later.', 'error');
            console.error('Error:', error);
        }
    }
    
    // Function to display messages
    function showMessage(message, type) {
        const messageBox = document.getElementById('messageBox');
        messageBox.textContent = message;
        messageBox.className = 'message-box ' + type;
        messageBox.style.display = 'block';
    }
</script>